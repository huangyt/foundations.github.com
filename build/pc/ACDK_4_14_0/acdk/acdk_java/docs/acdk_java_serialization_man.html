<head>
<meta name="generator" content="GenWeb 1.0">

<meta name="keywords" content="acdk::java::serialization, Java, serialization">
<title>acdk_java_serialization Manual</title>
<link rel="stylesheet" type="text/css" href="./../../docs\images/artefaktur_moweb.css">

</head>
<body bgColor="#ffffff">
<table with="100%" style="background-color:#F0F0F0;border-width:1px;border-style:solid;border-color:black;padding:3mm;text-align:justify"> <!-- border="2" cellspacing="0" > -->
<tr width="100%">
  <td width="200" valign="top" style="border-right-width:3px;border-right-style:solid;border-right-color:black">
<p class="navleiste" align="right">
<img src="./../../docs\images/arrow_nw.gif" alt="down">&nbsp;<a  href="../../index.html">ACDK</a><br>
<img src="./../../docs\images/arrow_nw.gif" alt="down">&nbsp;<a  href="../../docs/packages.html">Packages</a><br>
<img src="./../../docs\images/arrow_nw.gif" alt="down">&nbsp;<a  href="../index.html">ACDK Java</a><br>
<img src="./../../docs\images/arrow_right_stop.gif" alt="down">&nbsp;acdk_java_serialization<br>
&nbsp;&nbsp;<img src="./../../docs\images/arrow_se.gif" alt="down">&nbsp;<a  href="acdk_java_serialization_sample.html">Sample</a>

</p>
</td>
<td height="100%" width="600" valign="top" >
<table width="100%" height="100%" valign="bottom" style="background-color:#F0F0F0;border-rigth-width:3px;border-rigth-style:solid;border-rigth-color:black;padding:1mm">
  <tr>
    <td style="height:40px">
<center><p class="curchapterline"> | <a  href="readme.html">ACDK Java Readme</a> | <a  href="acdk_java_man_installation.html">Compile acdk_java</a> | <a  href="acdk_java_man.html">acdk_java</a> | acdk_java_serialization | <a  href="../../docs/acdk_general_install.html">Installation</a> | <a  href="../../docs/ACDK-FreeLicense.html">License</a> |</p></center>
    </td>
  </tr>
  <tr valign="bottom" style="vertical-align:bottom">
    <td style="background-color:#FFFFFF;border-top-style:solid;border-top-color:black;border-top-width:3px;padding-left:3mm;vertical-align=bottom">
<h1>acdk_java_serialization Manual</h1>
    </td>
  </tr>
</table>
</td>
<td valign="top">
<table height="100%" width="100%" style="border-left-style:solid;border-left-color:black;border-left-width:3px">
  <tr >
    <td valign="bottom" 
        style="vertical-align:bottom;height:40px;FONT-SIZE:22pt;font-WEIGHT=bold;letter-spacing:4pt;TEXT-ALIGN:center">
      <a href="http://acdk.sourceforge.net">ACDK</a>
    </td>
  </tr>
  <tr>
    <td valign="top" 
        style="vertical-align:top;font-size=12pt;text-align:center;border-top-style:solid;border-top-color:black;border-top-width:3px;">
        <a href="http://www.artefaktur.com">Artefaktur</a> Component<br>Development Kit
    </td>
  </tr>
</table>
</td>
</tr>
</table>
<hr>    
<!-- <h1>acdk_java_serialization Manual</h1> -->
<br>
<br>
<p class="PageIntro">
The package provides a java compatible object serialization.<br>
</p>
<br>
See also <a  href="acdk_java_serialization_sample.html"><img border="0" src="./../../docs\images/url_rhtm.gif" alt="">&nbsp;Sample</a>.<br>
<br>
<a name="jumptable87"></a><table class="jumptableframe" width="100%"><tr><td><p><i><small>Content of this chapter:</small></i><br><br>&nbsp;&nbsp;<a class="jumptable1"  style="border-style:none" href="#Type mapping"><img border="0" src="./../../docs\images/arrow_down_stop.gif">&nbsp;Type mapping</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="jumptable2"  style="border-style:none" href="#Basic Types"><img border="0" src="./../../docs\images/arrow_down_stop.gif">&nbsp;Basic Types</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="jumptable2"  style="border-style:none" href="#Arrays of basic"><img border="0" src="./../../docs\images/arrow_down_stop.gif">&nbsp;Arrays of basic</a><br>
&nbsp;&nbsp;<a class="jumptable1"  style="border-style:none" href="#Arrays of Objects"><img border="0" src="./../../docs\images/arrow_down_stop.gif">&nbsp;Arrays of Objects</a><br>
&nbsp;&nbsp;<a class="jumptable1"  style="border-style:none" href="#Arrays of basic"><img border="0" src="./../../docs\images/arrow_down_stop.gif">&nbsp;Arrays of basic</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="jumptable2"  style="border-style:none" href="#Create Typemappings for own ACDK classes"><img border="0" src="./../../docs\images/arrow_down_stop.gif">&nbsp;Create Typemappings for own ACDK classes</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="jumptable2"  style="border-style:none" href="#Modify the type mapping"><img border="0" src="./../../docs\images/arrow_down_stop.gif">&nbsp;Modify the type mapping</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="jumptable2"  style="border-style:none" href="#Define own writer and reader methods."><img border="0" src="./../../docs\images/arrow_down_stop.gif">&nbsp;Define own writer and reader methods.</a><br>
&nbsp;&nbsp;<a class="jumptable1"  style="border-style:none" href="#Sample"><img border="0" src="./../../docs\images/arrow_down_stop.gif">&nbsp;Sample</a><br>
</p></td></tr></table><!-- jumptableframe -->
<br>
<br>
<h2><a href="#jumptable87"><img border="0" src="./../../docs\images/arrow_up_stop.gif">&nbsp;</a><a class="jumptarget" name="Type mapping">Type mapping</a></h2>
Java and ACDK has similar but not identical object model.<br>
Therefore for serialization a type mapping between Java and ACDK is 
necessary.<br>
<br>
<h3><a href="#jumptable87"><img border="0" src="./../../docs\images/arrow_up_stop.gif">&nbsp;</a><a class="jumptarget" name="Basic Types">Basic Types</a></h3>
Basic types will be serialized in network byte order.<br>
In Java a character is 16 bit wide (like a short). In ACDK a character is only 8
bit wide (like a byte). 
At the moment no transformation (UTF8/16) will be made in conversion of characters 
from ACDK to Java and vice version.<br>
Transfering data from Java to ACDK information about the
higher 8 bytes may be lost.<br>
<br>
<h3><a href="#jumptable87"><img border="0" src="./../../docs\images/arrow_up_stop.gif">&nbsp;</a><a class="jumptarget" name="Arrays of basic">Arrays of basic</a></h3>
Similar to the meta-information of ACDK classes with generated structures
::acdk::lang::dmi::ClazzInfo, there is also a database for the typmapping
using static structs of type ::acdk::java::serialization::ClassTypeMapping.<br>
<br>
The typmapping for some standard Java/ACDK classes can be found in the files
a2jser_acdk_lang.cpp, a2jser_acdk_util.cpp, and so on in the directory 
./src/acdk/java/serialization. 
<br>
<h2><a href="#jumptable87"><img border="0" src="./../../docs\images/arrow_up_stop.gif">&nbsp;</a><a class="jumptarget" name="Arrays of Objects">Arrays of Objects</a></h2>
The type mapping of Objects is supported via a user defined type mapping.<br>
(See below.)
<br>
<h2><a href="#jumptable87"><img border="0" src="./../../docs\images/arrow_up_stop.gif">&nbsp;</a><a class="jumptarget" name="Arrays of basic">Arrays of basic</a></h2>
The serialization of the basic types and Object in one dimensional
arrays is supperted. Not supported are serialization of multi dimensional
arrays.<br>
<br>
<h3><a href="#jumptable87"><img border="0" src="./../../docs\images/arrow_up_stop.gif">&nbsp;</a><a class="jumptarget" name="Create Typemappings for own ACDK classes">Create Typemappings for own ACDK classes</a></h3>
To create own type mappings you can use the Java programm
./src/java/JavaClassDeclToAcdkSer.java. 
<br>
<code>promt&gt; javac JavaClassDeclToAcdkSer java.package.ClassName</code>
<br>
The output can be copied/appended into a .cpp source file.<br>
<br>
<h3><a href="#jumptable87"><img border="0" src="./../../docs\images/arrow_up_stop.gif">&nbsp;</a><a class="jumptarget" name="Modify the type mapping">Modify the type mapping</a></h3>
<br>
The default mapping can be modified:<br>
<ul class="FeatureList">
<li class="Feature"> Name of member
<li class="Feature"> Type of member
</ul> 
<br>
<table border="0" cellspacing="0" cellpadding="0" width="100%"><tr><td width="15"><p class="note\"><font size="32pt">!</font></p></td><td>
Do not delete member definition of the type mapping, because the original Java serialization
is still needed to write a correct Java class description to the stream.<br>
</td></tr></table>
<br>
<h3><a href="#jumptable87"><img border="0" src="./../../docs\images/arrow_up_stop.gif">&nbsp;</a><a class="jumptarget" name="Define own writer and reader methods.">Define own writer and reader methods.</a></h3>
<br>
In the struct ClassTypeMapping the members read_func and write_func can be 
overwritten to define own methods to read/write an Object in a Java compatible way.<br>
<br>
Please refer to the file acdk_java/src/acdk/java/serialization/a2jser_acdk_util.cpp and the
other a2jser_* files to look some examples.<br>
<br>
<table border="0" cellspacing="0" cellpadding="0" width="100%"><tr><td width="15"><p class="note\"><font size="32pt">!</font></p></td><td>
In the read_func function the newly created ACDK-Object has to be registered before 
reading other members.<br>
</td></tr></table>
<table BGCOLOR="#F0F0F0" width="100%"><tr><td>
<PRE>

RObject 
<B><FONT COLOR="#0000FF">a2jser_read_acdk_util_ArrayList</FONT></B>(IN(::acdk::java::serialization::RJavaObjectReader) in, 
                                <B><FONT COLOR="#228B22">const</FONT></B> ::acdk::java::serialization::ClassTypeMapping* ctm)
{
  <B><FONT COLOR="#228B22">int</FONT></B> count = in-&gt;readInt();
  RArrayList al = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList();
  in-&gt;registerNewObject(&amp;al); <I><FONT COLOR="#B22222">// register Object.
</FONT></I>  <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#228B22">int</FONT></B> i = 0; i &lt; count; ++i)
  {
    al-&gt;add(in-&gt;readObject());
  }
  <B><FONT COLOR="#A020F0">return</FONT></B> al;
}

:acdk::java::serialization::ClassTypeMapping a2jser_java_util_ArrayList = 
{
  <B><FONT COLOR="#BC8F8F">&quot;acdk/util/ArrayList&quot;</FONT></B>, <I><FONT COLOR="#B22222">// acdk_name
</FONT></I>  <B><FONT COLOR="#BC8F8F">&quot;java/util/ArrayList&quot;</FONT></B>, <I><FONT COLOR="#B22222">// java_name
</FONT></I>  <B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B>, <I><FONT COLOR="#B22222">// acdk_super
</FONT></I>  <B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B>, <I><FONT COLOR="#B22222">// java_super
</FONT></I>  ::acdk::java::serialization::SC_SERIALIZABLE, <I><FONT COLOR="#B22222">// flags
</FONT></I>  JLONG_CONSTANT(0x7881d21d99c7619d), <I><FONT COLOR="#B22222">// UID
</FONT></I>  JLONG_CONSTANT(0x788cfdda08df1046), <I><FONT COLOR="#B22222">//[] UID
</FONT></I>  a2jser_java_util_ArrayList_fields, <I><FONT COLOR="#B22222">// Fields
</FONT></I>  a2jser_read_acdk_util_ArrayList, <I><FONT COLOR="#B22222">// read_func
</FONT></I>  a2jser_write_acdk_util_ArrayList, <I><FONT COLOR="#B22222">// write_func
</FONT></I>  0 <I><FONT COLOR="#B22222">// used for internal linked list
</FONT></I>};

</PRE></td></tr></table>
<h2><a href="#jumptable87"><img border="0" src="./../../docs\images/arrow_up_stop.gif">&nbsp;</a><a class="jumptarget" name="Sample">Sample</a></h2>
Please refer to <a  href="acdk_java_serialization_sample.html"><img border="0" src="./../../docs\images/url_rhtm.gif" alt="">&nbsp;Sample</a>.<br>

<hr>
<table width="100%" class="subchaptersframe">
<tr><td>
<center><p class="curchapterline"> | <a  href="readme.html">ACDK Java Readme</a> | <a  href="acdk_java_man_installation.html">Compile acdk_java</a> | <a  href="acdk_java_man.html">acdk_java</a> | acdk_java_serialization | <a  href="../../docs/acdk_general_install.html">Installation</a> | <a  href="../../docs/ACDK-FreeLicense.html">License</a> |</p></center>
</td></tr></table>
</body>
</html>


